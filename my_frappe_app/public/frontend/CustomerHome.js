var gt=Object.defineProperty,bt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Ve=(g,u,y)=>u in g?gt(g,u,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[u]=y,ue=(g,u)=>{for(var y in u||(u={}))vt.call(u,y)&&Ve(g,y,u[y]);if(Fe)for(var y of Fe(u))mt.call(u,y)&&Ve(g,y,u[y]);return g},Be=(g,u)=>bt(g,yt(u));import{c as L,d as ft,z as h,q as R,A as Re,o,a,b as e,e as i,u as n,S as ht,t as d,i as C,w as p,_ as m,h as c,f as b,n as _,H as pe,C as O,X as Le,B as ke,F as f,L as _t,r as S,v as We,x as kt,y as wt,M as Ct,p as D,I as Ee,j as St}from"./index.js";import{R as Ye,S as Mt,_ as X,N as q,P as K,D as we,b as Ue,a as Dt,F as jt,C as Ce,c as Tt,T as $t}from"./truck.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=L("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=L("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=L("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=L("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=L("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=L("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),At={class:"p-4 md:p-6 space-y-5 max-w-7xl mx-auto"},It={class:"flex justify-between items-center bg-white p-4 md:p-5 rounded-2xl border border-gray-100 shadow-sm"},Pt={class:"flex items-center gap-3 md:gap-4"},zt={class:"p-2.5 bg-blue-600 rounded-xl text-white shadow-lg"},qt={class:"text-xs text-gray-400 max-w-[180px] md:max-w-none truncate"},Nt={key:0},Ft={key:1},Vt={key:2},Bt={class:"flex items-center gap-2 flex-shrink-0"},Rt={class:"flex gap-1 bg-gray-100 p-1 rounded-xl w-fit"},Lt={key:0,class:"bg-green-50 border border-green-200 rounded-2xl p-4 space-y-2"},Wt={class:"flex items-start justify-between"},Et={class:"flex gap-3"},Yt={class:"text-xs text-green-700 mt-0.5"},Ut={class:"font-mono font-semibold"},Ht={class:"font-semibold"},Qt={key:0,class:"flex items-start gap-2 bg-orange-50 border border-orange-200 rounded-xl px-3 py-2 ml-8"},Jt={class:"text-xs text-orange-700"},Xt={class:"font-semibold"},Kt={class:"font-semibold"},Gt={key:1,class:"bg-amber-50 border border-amber-200 rounded-2xl p-4"},Zt={class:"flex items-start justify-between"},es={class:"flex gap-3"},ts={class:"text-xs text-amber-700 mt-0.5"},ss={key:0,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-24 text-center"},ls={key:1,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-24 text-center"},os={key:2,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"},as={class:"flex items-center gap-2 bg-blue-50 border border-blue-100 rounded-xl px-4 py-2.5"},rs={class:"text-xs text-blue-700"},ns={class:"font-semibold"},is={key:0,class:"text-orange-600 font-semibold ml-1"},ds={key:0,class:"mb-6"},cs={class:"flex items-center gap-2 mb-4"},us={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"},ps={class:"aspect-square bg-white relative overflow-hidden"},xs=["src"],gs={key:1,class:"w-full h-full flex items-center justify-center bg-blue-50"},bs={class:"absolute top-2 left-2"},ys={key:0,class:"bg-green-500 text-white text-[9px] font-bold px-2 py-1 rounded-full flex items-center gap-1 shadow"},vs={key:1,class:"bg-amber-500 text-white text-[9px] font-bold px-2 py-1 rounded-full flex items-center gap-1 shadow"},ms={key:2,class:"bg-blue-600 text-white text-[9px] font-bold px-2 py-1 rounded-full flex items-center gap-1 shadow"},fs={class:"p-3 flex-1 flex flex-col justify-between"},hs={class:"font-bold text-gray-800 line-clamp-2 text-sm"},_s={class:"text-[10px] text-blue-600 mt-0.5 uppercase tracking-tight font-semibold"},ks={class:"flex flex-wrap gap-0.5 mt-2"},ws=["title"],Cs={class:"mt-3 space-y-1.5"},Ss={class:"flex items-baseline gap-1"},Ms={class:"text-base font-black text-gray-900"},Ds={key:0,class:"text-center py-1.5 text-[10px] text-green-600 font-bold bg-green-50 rounded-lg border border-green-100"},js={key:1,class:"text-center py-2 text-[10px] text-amber-700 font-bold bg-amber-50 rounded-lg border border-amber-200"},Ts={key:3,class:"text-center py-1.5 text-[10px] text-gray-400 font-medium bg-gray-50 rounded-lg"},$s={key:4,class:"text-center py-1.5 text-[10px] text-amber-500 font-medium bg-amber-50 rounded-lg"},Os={key:1,class:"flex items-center justify-between bg-gray-50 rounded-lg p-0.5 border"},As={class:"font-bold text-sm text-blue-600"},Is={key:1},Ps={key:0,class:"flex items-center gap-2 mb-4"},zs={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 mb-6"},qs={class:"aspect-square bg-gray-50 relative overflow-hidden"},Ns=["src"],Fs={key:1,class:"w-full h-full flex items-center justify-center"},Vs={key:2,class:"absolute top-2 right-2"},Bs={key:3,class:"absolute top-2 left-2"},Rs={class:"bg-emerald-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shadow"},Ls={class:"p-3 flex-1 flex flex-col justify-between"},Ws={class:"font-bold text-gray-800 line-clamp-2 text-sm"},Es={class:"text-[10px] text-gray-400 mt-0.5 uppercase tracking-tight"},Ys={class:"mt-3"},Us={class:"flex items-baseline gap-1 mb-1"},Hs={class:"text-base font-black text-gray-900"},Qs={class:"text-[10px] text-gray-400"},Js={key:1,class:"flex items-center justify-between bg-gray-50 rounded-lg p-0.5 border"},Xs={class:"font-bold text-sm text-blue-600"},Ks={key:2,class:"space-y-3"},Gs={class:"flex items-center gap-2"},Zs={class:"flex items-center gap-1.5 text-xs text-gray-400 font-semibold px-2"},el={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"},tl={class:"aspect-square bg-gray-100 relative overflow-hidden"},sl=["src"],ll={key:1,class:"w-full h-full flex items-center justify-center"},ol={class:"absolute inset-0 flex items-center justify-center"},al={class:"bg-white/90 border border-orange-200 rounded-lg px-2 py-1 flex items-center gap-1"},rl={class:"p-3"},nl={class:"font-bold text-gray-500 text-sm line-clamp-2"},il={class:"text-[10px] text-orange-500 font-semibold mt-1"},dl={key:4,class:"text-center py-20"},cl={key:0,class:"space-y-3"},ul={key:1,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-28 text-center"},pl={key:2,class:"space-y-3"},xl={class:"flex items-center justify-between p-4 gap-3"},gl={class:"flex items-center gap-3 min-w-0"},bl={class:"min-w-0"},yl={class:"flex items-center gap-2 flex-wrap"},vl={class:"font-bold text-gray-900 text-sm font-mono"},ml={key:0,class:"inline-flex items-center gap-1 bg-blue-100 text-blue-700 text-[9px] font-bold px-2 py-0.5 rounded-full"},fl={class:"text-xs text-gray-400 mt-0.5"},hl={key:0},_l={class:"flex items-center gap-2 flex-shrink-0"},kl={class:"font-black text-gray-900 text-sm"},wl={key:0,class:"border-t border-gray-100/80 px-4 pb-5 pt-4 space-y-4"},Cl={key:0,class:"flex items-start gap-2 bg-blue-50 border border-blue-100 rounded-xl px-3 py-2.5"},Sl={class:"flex items-center gap-1"},Ml={class:"flex flex-col items-center gap-1"},Dl={class:"flex items-center gap-3 bg-gray-50 rounded-xl p-3"},jl={class:"text-xs text-gray-500"},Tl={class:"font-semibold text-gray-700"},$l={key:0,class:"space-y-3"},Ol={key:1,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-28 text-center"},Al={key:2,class:"space-y-4"},Il={class:"p-4 flex items-start justify-between gap-3"},Pl={class:"flex items-center gap-3"},zl={class:"p-2.5 bg-blue-50 rounded-xl text-blue-600"},ql={class:"flex items-center gap-2 flex-wrap"},Nl={class:"font-bold text-gray-900 text-sm font-mono"},Fl={class:"text-xs text-gray-400 mt-0.5"},Vl={key:0,class:"ml-2"},Bl={class:"px-4 pb-4 space-y-3"},Rl={class:"flex items-center justify-between mb-2"},Ll={class:"text-xs font-bold text-gray-700"},Wl={key:0,class:"text-[9px] bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded font-bold"},El={class:"flex gap-1.5 flex-wrap"},Yl={key:0,class:"text-[8px] opacity-80"},Ul={key:0,class:"flex items-start gap-2 bg-amber-50 border border-amber-200 rounded-xl px-3 py-2"},Hl={class:"space-y-5"},Ql={class:"flex items-start gap-3 bg-amber-50 border border-amber-200 rounded-xl px-4 py-3"},Jl={class:"flex items-start gap-3 bg-blue-50 border border-blue-100 rounded-xl px-4 py-3"},Xl={class:"flex-1"},Kl={class:"font-semibold text-sm text-blue-900"},Gl={key:0},Zl={class:"text-xs font-bold text-gray-700 mb-2 block uppercase tracking-wide"},eo={class:"border border-gray-200 rounded-xl overflow-hidden"},to={class:"w-full text-xs"},so={class:"divide-y divide-gray-100"},lo={class:"px-3 py-2 font-semibold text-gray-700"},oo={class:"px-3 py-2 text-center"},ao=["onClick"],ro={class:"px-3 py-2"},no={key:0,class:"flex items-center justify-center gap-1"},io=["onClick","disabled"],co={class:"w-5 text-center font-black text-blue-600 text-sm"},uo=["onClick","disabled"],po={key:1,class:"block text-center text-gray-300 font-bold"},xo={class:"px-3 py-2 text-right text-gray-500"},go={key:0},bo={key:1,class:"text-red-400 text-[10px]"},yo={key:0},vo={key:1},mo={key:1},fo={class:"space-y-3"},ho=["onClick"],_o={class:"flex items-center gap-2"},ko={class:"text-xs font-semibold text-gray-700"},wo={class:"text-[10px] text-gray-500"},Co={key:0,class:"mt-2 ml-2 border border-purple-200 rounded-xl overflow-hidden"},So={class:"w-full text-xs"},Mo={class:"divide-y divide-purple-100"},Do={class:"px-3 py-1.5 font-semibold text-gray-600"},jo={class:"px-3 py-1.5 text-center"},To=["onClick"],$o={class:"px-3 py-1.5"},Oo={key:0,class:"flex items-center justify-center gap-1"},Ao=["onClick","disabled"],Io={class:"w-4 text-center font-black text-purple-600"},Po=["onClick","disabled"],zo={key:1,class:"block text-center text-gray-300"},qo={class:"px-3 py-1.5 text-right text-gray-500"},No={key:0},Fo={key:1,class:"text-red-400 text-[9px]"},Vo={class:"grid grid-cols-2 gap-3"},Bo={key:2,class:"bg-red-50 border border-red-200 rounded-xl px-4 py-3"},Ro={class:"text-xs text-red-700"},Lo={class:"flex gap-2 w-full"},Wo={class:"space-y-4"},Eo={key:0,class:"flex items-start gap-2 bg-blue-50 border border-blue-100 rounded-xl px-4 py-3"},Yo={class:"text-xs text-blue-700"},Uo={key:0},Ho={key:1},Qo={key:2},Jo={class:"space-y-2 max-h-72 overflow-y-auto pr-1"},Xo={class:"w-11 h-11 rounded-lg overflow-hidden bg-white border border-gray-100 flex-shrink-0 flex items-center justify-center"},Ko=["src"],Go={class:"flex-1 min-w-0"},Zo={class:"font-semibold text-gray-800 text-sm line-clamp-1"},ea={class:"text-xs text-gray-400"},ta={class:"flex items-center gap-1 mt-1.5 bg-white rounded-lg border border-gray-200 w-fit p-0.5"},sa={class:"font-bold text-sm text-blue-600 w-5 text-center"},la={class:"flex flex-col items-end gap-2 flex-shrink-0"},oa={class:"font-bold text-sm text-gray-900"},aa={class:"border-t border-gray-100 pt-3 space-y-1.5 text-sm"},ra={class:"flex justify-between text-gray-500"},na={class:"flex justify-between font-black text-gray-900 pt-2 border-t border-gray-100"},ia={key:1,class:"bg-red-50 border border-red-200 text-red-700 text-xs rounded-xl px-4 py-3"},da={class:"flex gap-2 w-full"},ca={class:"flex gap-2 w-full"},ba=ft({__name:"CustomerHome",props:{filters:{}},setup(g){const u=g,y=h("shop"),w=h({}),W=h(!1),N=h(!1),A=h(""),xe=h(!1),De=h(""),je=h(""),Z=h([]),E=h(!1),v=h(null),Y=h(!1),I=h(""),ge=h(!1),Te=h(""),k=h({startDate:new Date().toISOString().split("T")[0],months:1,schedule:{},additionalItems:[]}),be=h({}),ye=h({}),ee=h({}),V=D(()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()]),Je=D(()=>V.value.slice(0,3)),U=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ve={Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Sunday:"Sun"},te={Monday:"monday_qty",Tuesday:"tuesday_qty",Wednesday:"wednesday_qty",Thursday:"thursday_qty",Friday:"friday_qty",Saturday:"saturday_qty",Sunday:"sunday_qty"},se=h(null),H=h(!1),Q=h(null),P=R({url:"my_frappe_app.api.get_seller_items",debounce:300}),j=R({url:"my_frappe_app.api.get_customer_orders"}),$e=R({url:"my_frappe_app.api.get_customer_subscription_status",onSuccess(s){be.value=(s==null?void 0:s.active)||{},ye.value=(s==null?void 0:s.pending)||{},ee.value=(s==null?void 0:s.schedule)||{}}}),Oe=R({url:"my_frappe_app.api.cancel_order",onSuccess(s){H.value=!1,Q.value=null,s.status==="success"&&j.reload()}}),Xe=R({url:"my_frappe_app.api.place_order",onSuccess(s){N.value=!1,s.status==="success"?(De.value=s.order_id,je.value=s.formatted_total,Z.value=s.skipped_items||[],w.value={},W.value=!1,xe.value=!0,u.filters.customer&&j.fetch({customer:u.filters.customer})):A.value=s.message||"Something went wrong."},onError(s){N.value=!1,A.value=(s==null?void 0:s.message)||"Failed to place order."}}),Ke=R({url:"my_frappe_app.api.create_subscription",onSuccess(s){Y.value=!1,s.status==="success"?(E.value=!1,ge.value=!0,Te.value=s.message||"Subscription request sent!",u.filters.customer&&u.filters.seller&&($e.fetch({customer:u.filters.customer,seller:u.filters.seller}),j.fetch({customer:u.filters.customer}))):I.value=s.message||"Failed to create subscription"},onError(s){Y.value=!1,I.value=(s==null?void 0:s.message)||"Failed to create subscription"}});Re(()=>u.filters,s=>{s!=null&&s.seller&&(s!=null&&s.category)?(P.fetch({seller:s.seller,category:s.category}),w.value={}):P.data=null,s!=null&&s.customer&&j.fetch({customer:s.customer}),s!=null&&s.customer&&(s!=null&&s.seller)&&$e.fetch({customer:s.customer,seller:s.seller})},{deep:!0,immediate:!0}),Re(y,s=>{s==="orders"&&u.filters.customer&&j.fetch({customer:u.filters.customer})});const le=D(()=>P.data||[]),Ae=D(()=>le.value.filter(s=>s.price_available)),oe=D(()=>le.value.filter(s=>!s.price_available)),ae=D(()=>Ae.value.filter(s=>s.is_subscription_item===!0)),Ie=D(()=>Ae.value.filter(s=>!s.is_subscription_item)),re=D(()=>{var s;return((s=j.data)==null?void 0:s.orders)||[]}),ne=D(()=>{var s;return((s=j.data)==null?void 0:s.subscriptions)||[]}),me=s=>{var l;if(!be.value[s])return!1;const t=ee.value[s];return t?((l=t[V.value])!=null?l:0)>0:!0},ie=s=>{var l;if(!ye.value[s])return!1;const t=ee.value[s];return t?((l=t[V.value])!=null?l:0)>0:!0},Pe=s=>be.value[s]||ye.value[s]||"",Ge=s=>{var l;if(!me(s))return!1;const t=ee.value[s];return t?((l=t[V.value])!=null?l:0)>0:!0},Ze=s=>{v.value=s,I.value="",k.value={startDate:new Date().toISOString().split("T")[0],months:1,schedule:{[s.item_code]:{Monday:1,Tuesday:1,Wednesday:1,Thursday:1,Friday:1,Saturday:1,Sunday:1}},additionalItems:[]},E.value=!0},M=(s,t)=>{var l,r;return(r=(l=k.value.schedule[s])==null?void 0:l[t])!=null?r:0},J=(s,t,l)=>{k.value.schedule[s]||(k.value.schedule[s]={}),k.value.schedule[s][t]=Math.max(0,Math.min(l,99))},ze=(s,t)=>{const l=M(s,t);J(s,t,l>0?0:1)},T=(s,t)=>M(s,t)>0,qe=D(()=>ae.value.filter(s=>{var t;return s.item_code!==((t=v.value)==null?void 0:t.item_code)})),de=s=>k.value.additionalItems.includes(s),et=s=>{const t=k.value.additionalItems.indexOf(s.item_code);t===-1?(k.value.additionalItems.push(s.item_code),k.value.schedule[s.item_code]||(k.value.schedule[s.item_code]={Monday:0,Tuesday:0,Wednesday:0,Thursday:0,Friday:0,Saturday:0,Sunday:0})):(k.value.additionalItems.splice(t,1),delete k.value.schedule[s.item_code])},B=(s,t)=>{var l,r;return(r=(l=s.day_prices)==null?void 0:l[t])!=null?r:0},tt=()=>{if(!u.filters.customer||!u.filters.seller){I.value="Customer or seller information missing";return}if(!v.value)return;const s=v.value.item_code,l=[s,...k.value.additionalItems].map(($,ua)=>{const F=k.value.schedule[$]||{};return{item_code:$,is_primary_item:$===s?1:0,monday_qty:F.Monday||0,tuesday_qty:F.Tuesday||0,wednesday_qty:F.Wednesday||0,thursday_qty:F.Thursday||0,friday_qty:F.Friday||0,saturday_qty:F.Saturday||0,sunday_qty:F.Sunday||0}}),r=l.find($=>$.is_primary_item);if(!(r&&U.some($=>r[te[$]]>0))){I.value="Please select at least one day for the primary item.";return}I.value="",Y.value=!0,Ke.fetch({customer:u.filters.customer,seller:u.filters.seller,schedule_items:JSON.stringify(l),start_date:k.value.startDate,months:k.value.months})},z=(s,t)=>{const l=(w.value[s]||0)+t,r=ue({},w.value);l<=0?delete r[s]:r[s]=l,w.value=r},st=s=>{const t=ue({},w.value);delete t[s],w.value=t},fe=D(()=>Object.values(w.value).reduce((s,t)=>s+t,0)),he=D(()=>P.data?Object.entries(w.value).map(([s,t])=>{const l=le.value.find(r=>r.name===s);return l?Be(ue({},l),{qty:t,subtotal:l.price*t}):null}).filter(Boolean):[]),_e=D(()=>he.value.reduce((s,t)=>s+t.subtotal,0)),ce=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),lt=s=>s.price_available&&s.standard_rate!=null&&Math.abs(s.price-s.standard_rate)>.01,ot=()=>{if(!u.filters.seller||!u.filters.customer){A.value="Seller or customer info missing.";return}if(!Object.keys(w.value).length){A.value="Your cart is empty.";return}A.value="",N.value=!0,Xe.fetch({cart_data:JSON.stringify(w.value),customer:u.filters.customer,seller:u.filters.seller,pincode:u.filters.pincode||"",society:u.filters.society||null,delivery_address:u.filters.delivery_address||null})},at=()=>{A.value="",W.value=!0},rt=s=>({orange:"orange",blue:"blue",green:"green",red:"red",gray:"gray"})[s]||"gray",nt=s=>({orange:Ce,blue:O,green:O,red:Tt,gray:Ce})[s]||Ce,it=s=>({orange:"text-orange-500",blue:"text-blue-500",green:"text-green-500",red:"text-red-500",gray:"text-gray-400"})[s]||"text-gray-400",dt=s=>({orange:"bg-orange-50",blue:"bg-blue-50",green:"bg-green-50",red:"bg-red-50",gray:"bg-gray-50"})[s]||"bg-gray-50",ct=s=>{se.value=se.value===s?null:s},ut=s=>{Q.value=s,H.value=!0},pt=()=>{Q.value&&Oe.fetch({order_id:Q.value})},Ne=s=>[{key:"placed",label:"Placed",icon:O,done:!0,lineAfter:s.docstatus>=1},{key:"accepted",label:"Accepted",icon:O,done:s.docstatus>=1,lineAfter:s.per_delivered>=100},{key:"delivered",label:"Delivered",icon:$t,done:s.per_delivered>=100,lineAfter:s.status==="Completed"},{key:"completed",label:"Completed",icon:O,done:s.status==="Completed",lineAfter:!1}],xt={Active:"bg-green-100 text-green-700 border-green-200","Accept Pending":"bg-amber-100 text-amber-700 border-amber-200",Expired:"bg-gray-100 text-gray-500 border-gray-200",Cancelled:"bg-red-100 text-red-600 border-red-200"};return(s,t)=>(o(),a("div",At,[e("div",It,[e("div",Pt,[e("div",zt,[i(n(ht),{class:"w-5 h-5"})]),e("div",null,[t[17]||(t[17]=e("h2",{class:"text-base md:text-lg font-bold text-gray-900"},"Customer Portal",-1)),e("p",qt,[g.filters.category?g.filters.seller?(o(),a("span",Vt,d(g.filters.seller)+" Â· "+d(g.filters.category),1)):(o(),a("span",Ft,"Select a seller to browse")):(o(),a("span",Nt,"Select category from sidebar"))])])]),e("div",Bt,[y.value==="shop"&&g.filters.seller&&g.filters.category?(o(),C(n(m),{key:0,variant:"outline",size:"sm",loading:n(P).loading,onClick:t[0]||(t[0]=l=>n(P).fetch({seller:g.filters.seller,category:g.filters.category}))},{prefix:p(()=>[i(n(Ye),{class:"w-3.5 h-3.5"})]),_:1},8,["loading"])):c("",!0),y.value==="orders"?(o(),C(n(m),{key:1,variant:"outline",size:"sm",loading:n(j).loading,onClick:t[1]||(t[1]=l=>n(j).reload())},{prefix:p(()=>[i(n(Ye),{class:"w-3.5 h-3.5"})]),_:1},8,["loading"])):c("",!0),fe.value>0&&y.value==="shop"?(o(),C(n(m),{key:2,variant:"solid",theme:"blue",onClick:at},{prefix:p(()=>[i(n(Mt),{class:"w-4 h-4"})]),default:p(()=>[b(" "+d(fe.value)+" Â· "+d(ce(_e.value)),1)]),_:1})):c("",!0)])]),e("div",Rt,[e("button",{onClick:t[2]||(t[2]=l=>y.value="shop"),class:_(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all",y.value==="shop"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},[i(n(pe),{class:"w-4 h-4"}),t[18]||(t[18]=b(" Shop ",-1))],2),e("button",{onClick:t[3]||(t[3]=l=>y.value="orders"),class:_(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all",y.value==="orders"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},[i(n(He),{class:"w-4 h-4"}),t[19]||(t[19]=b(" My Orders ",-1)),re.value.length>0?(o(),C(n(X),{key:0,label:String(re.value.length),theme:"blue",size:"sm"},null,8,["label"])):c("",!0)],2),e("button",{onClick:t[4]||(t[4]=l=>y.value="subscriptions"),class:_(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all",y.value==="subscriptions"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},[i(n(q),{class:"w-4 h-4"}),t[20]||(t[20]=b(" My Plans ",-1)),ne.value.length>0?(o(),C(n(X),{key:0,label:String(ne.value.length),theme:"green",size:"sm"},null,8,["label"])):c("",!0)],2)]),xe.value?(o(),a("div",Lt,[e("div",Wt,[e("div",Et,[i(n(O),{class:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e("div",null,[t[22]||(t[22]=e("p",{class:"font-bold text-green-800 text-sm"},"Order placed successfully!",-1)),e("p",Yt,[e("span",Ut,d(De.value),1),t[21]||(t[21]=b(" Â· Total: ",-1)),e("span",Ht,d(je.value),1)])])]),e("button",{onClick:t[5]||(t[5]=l=>xe.value=!1),class:"text-green-400 hover:text-green-600"},[i(n(Le),{class:"w-4 h-4"})])]),Z.value.length?(o(),a("div",Qt,[i(n(ke),{class:"w-3.5 h-3.5 text-orange-500 mt-0.5 flex-shrink-0"}),e("p",Jt,[e("span",Xt,d(Z.value.length)+" item(s) skipped",1),t[23]||(t[23]=b(" â€” no price for today: ",-1)),e("span",Kt,d(Z.value.join(", ")),1)])])):c("",!0)])):c("",!0),ge.value?(o(),a("div",Gt,[e("div",Zt,[e("div",es,[i(n(G),{class:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),e("div",null,[t[24]||(t[24]=e("p",{class:"font-bold text-amber-800 text-sm"},"Subscription request sent!",-1)),e("p",ts,d(Te.value),1),t[25]||(t[25]=e("p",{class:"text-xs text-amber-600 mt-1"},"â³ Once seller accepts, daily delivery starts from next day.",-1))])]),e("button",{onClick:t[6]||(t[6]=l=>ge.value=!1),class:"text-amber-400 hover:text-amber-600"},[i(n(Le),{class:"w-4 h-4"})])])])):c("",!0),y.value==="shop"?(o(),a(f,{key:2},[g.filters.category?g.filters.seller?n(P).loading?(o(),a("div",os,[(o(),a(f,null,S(8,l=>e("div",{key:l,class:"h-60 bg-gray-100 rounded-2xl animate-pulse"})),64))])):le.value.length>0?(o(),a(f,{key:3},[e("div",as,[i(n(Qe),{class:"w-4 h-4 text-blue-500 flex-shrink-0"}),e("p",rs,[t[30]||(t[30]=b(" Prices shown are ",-1)),e("span",ns,d(V.value)+"'s rates",1),t[31]||(t[31]=b(". ",-1)),oe.value.length?(o(),a("span",is," Â· "+d(oe.value.length)+" item(s) unavailable today. ",1)):c("",!0)])]),ae.value.length>0?(o(),a("div",ds,[e("div",cs,[i(n(q),{class:"w-5 h-5 text-blue-600"}),t[32]||(t[32]=e("h3",{class:"text-base font-bold text-gray-900"},"Newspaper Subscriptions",-1)),i(n(X),{label:"Day-wise Delivery",theme:"blue",size:"sm"})]),e("div",us,[(o(!0),a(f,null,S(ae.value,l=>(o(),a("div",{key:l.name,class:"bg-gradient-to-br from-blue-50 to-white rounded-2xl border-2 border-blue-100 overflow-hidden hover:shadow-lg transition-all flex flex-col group"},[e("div",ps,[l.image?(o(),a("img",{key:0,src:l.image,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,xs)):(o(),a("div",gs,[i(n(q),{class:"w-12 h-12 text-blue-200"})])),e("div",bs,[me(l.item_code)?(o(),a("div",ys,[i(n(O),{class:"w-2.5 h-2.5"}),t[33]||(t[33]=b(" Active ",-1))])):ie(l.item_code)?(o(),a("div",vs,[i(n(G),{class:"w-2.5 h-2.5"}),t[34]||(t[34]=b(" Pending ",-1))])):(o(),a("div",ms,[i(n(Ue),{class:"w-2.5 h-2.5"}),t[35]||(t[35]=b(" Subscribe ",-1))]))])]),e("div",fs,[e("div",null,[e("h4",hs,d(l.item_name),1),e("p",_s,d(l.item_group),1),Pe(l.item_code)?(o(),a("p",{key:0,class:_(["text-[10px] font-semibold mt-0.5 truncate",ie(l.item_code)?"text-amber-600":"text-green-600"])},d(Pe(l.item_code)),3)):c("",!0),e("div",ks,[(o(),a(f,null,S(U,r=>{var x;return o(),a(f,{key:r},[((x=l.day_prices)==null?void 0:x[r])>0?(o(),a("div",{key:0,class:"text-[8px] px-1 py-0.5 rounded bg-blue-50 border border-blue-100 text-blue-600 font-semibold",title:`${r}: â‚¹${l.day_prices[r]}`},d(ve[r]),9,ws)):c("",!0)],64)}),64))])]),e("div",Cs,[e("div",Ss,[e("span",Ms,d(l.formatted_price),1),t[36]||(t[36]=e("span",{class:"text-[10px] text-gray-400"},"today",-1))]),me(l.item_code)?(o(),a("div",Ds," âœ“ Active Subscription ")):ie(l.item_code)?(o(),a("div",js,[i(n(G),{class:"w-3 h-3 inline mr-1"}),t[37]||(t[37]=b(" Awaiting Seller Approval ",-1))])):(o(),C(n(m),{key:2,variant:"solid",theme:"blue",class:"w-full",size:"sm",onClick:r=>Ze(l)},{prefix:p(()=>[i(n(Ue),{class:"w-3 h-3"})]),default:p(()=>[t[38]||(t[38]=b(" Subscribe ",-1))]),_:1},8,["onClick"])),Ge(l.item_code)?(o(),a("div",Ts," ðŸ“¦ Auto-delivered today via subscription ")):ie(l.item_code)?(o(),a("div",$s," Manual order blocked â€” awaiting activation ")):(o(),a(f,{key:5},[w.value[l.name]?(o(),a("div",Os,[i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,-1)},{icon:p(()=>[i(n(Se),{class:"w-3 h-3"})]),_:1},8,["onClick"]),e("span",As,d(w.value[l.name]),1),i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,1)},{icon:p(()=>[i(n(Me),{class:"w-3 h-3"})]),_:1},8,["onClick"])])):(o(),C(n(m),{key:0,variant:"outline",class:"w-full",size:"sm",onClick:r=>z(l.name,1)},{default:p(()=>[...t[39]||(t[39]=[b(" Buy Today ",-1)])]),_:1},8,["onClick"]))],64))])])]))),128))])])):c("",!0),Ie.value.length>0?(o(),a("div",Is,[ae.value.length>0?(o(),a("div",Ps,[i(n(K),{class:"w-5 h-5 text-gray-600"}),t[40]||(t[40]=e("h3",{class:"text-base font-bold text-gray-900"},"Regular Products",-1))])):c("",!0),e("div",zs,[(o(!0),a(f,null,S(Ie.value,l=>(o(),a("div",{key:l.name,class:"bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-lg transition-all flex flex-col group"},[e("div",qs,[l.image?(o(),a("img",{key:0,src:l.image,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,Ns)):(o(),a("div",Fs,[i(n(K),{class:"w-10 h-10 text-gray-200"})])),w.value[l.name]?(o(),a("div",Vs,[i(n(X),{label:`${w.value[l.name]}`,theme:"blue"},null,8,["label"])])):c("",!0),lt(l)?(o(),a("div",Bs,[e("div",Rs,[i(n(Qe),{class:"w-2.5 h-2.5"}),b(d(Je.value),1)])])):c("",!0)]),e("div",Ls,[e("div",null,[e("h4",Ws,d(l.item_name),1),e("p",Es,d(l.item_group),1)]),e("div",Ys,[e("div",Us,[e("span",Hs,d(l.formatted_price),1),e("span",Qs,"/ "+d(l.stock_uom),1)]),w.value[l.name]?(o(),a("div",Js,[i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,-1)},{icon:p(()=>[i(n(Se),{class:"w-3 h-3"})]),_:1},8,["onClick"]),e("span",Xs,d(w.value[l.name]),1),i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,1)},{icon:p(()=>[i(n(Me),{class:"w-3 h-3"})]),_:1},8,["onClick"])])):(o(),C(n(m),{key:0,variant:"outline",class:"w-full",size:"sm",onClick:r=>z(l.name,1)},{default:p(()=>[...t[41]||(t[41]=[b(" Add to Cart ",-1)])]),_:1},8,["onClick"]))])])]))),128))])])):c("",!0),oe.value.length>0?(o(),a("div",Ks,[e("div",Gs,[t[43]||(t[43]=e("div",{class:"flex-1 h-px bg-gray-100"},null,-1)),e("div",Zs,[i(n(ke),{class:"w-3.5 h-3.5 text-orange-400"}),t[42]||(t[42]=b(" Not Available Today ",-1))]),t[44]||(t[44]=e("div",{class:"flex-1 h-px bg-gray-100"},null,-1))]),e("div",el,[(o(!0),a(f,null,S(oe.value,l=>(o(),a("div",{key:l.name,class:"bg-gray-50 rounded-2xl border border-gray-100 overflow-hidden flex flex-col opacity-60"},[e("div",tl,[l.image?(o(),a("img",{key:0,src:l.image,class:"w-full h-full object-cover grayscale"},null,8,sl)):(o(),a("div",ll,[i(n(K),{class:"w-10 h-10 text-gray-300"})])),e("div",ol,[e("div",al,[i(n(ke),{class:"w-3 h-3 text-orange-500"}),t[45]||(t[45]=e("span",{class:"text-[10px] font-bold text-orange-600"},"Unavailable",-1))])])]),e("div",rl,[e("h4",nl,d(l.item_name),1),e("p",il,d(l.price_reason||`No price for
                  ${V.value}`),1)])]))),128))])])):c("",!0)],64)):!n(P).loading&&g.filters.seller&&g.filters.category?(o(),a("div",dl,[i(n(K),{class:"w-10 h-10 text-gray-300 mx-auto mb-2"}),t[46]||(t[46]=e("p",{class:"text-gray-500 text-sm"},"No products found.",-1))])):c("",!0):(o(),a("div",ls,[i(n(pe),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[28]||(t[28]=e("h3",{class:"text-base font-bold text-gray-700"},"Select a Seller",-1)),t[29]||(t[29]=e("p",{class:"text-sm text-gray-400 mt-1"},"Category selected! Now pick a seller from the sidebar.",-1))])):(o(),a("div",ss,[i(n(_t),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[26]||(t[26]=e("h3",{class:"text-base font-bold text-gray-700"},"Select a Category",-1)),t[27]||(t[27]=e("p",{class:"text-sm text-gray-400 mt-1"},"Sidebar â†’ Pincode â†’ Category â†’ Seller",-1))]))],64)):c("",!0),y.value==="orders"?(o(),a(f,{key:3},[n(j).loading?(o(),a("div",cl,[(o(),a(f,null,S(3,l=>e("div",{key:l,class:"h-20 bg-gray-100 rounded-2xl animate-pulse"})),64))])):re.value.length===0?(o(),a("div",ul,[i(n(He),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[48]||(t[48]=e("h3",{class:"text-base font-bold text-gray-700"},"No Orders Yet",-1)),t[49]||(t[49]=e("p",{class:"text-sm text-gray-400 mt-1"},"Your placed orders will appear here.",-1)),i(n(m),{variant:"outline",class:"mt-4",onClick:t[7]||(t[7]=l=>y.value="shop")},{prefix:p(()=>[i(n(pe),{class:"w-4 h-4"})]),default:p(()=>[t[47]||(t[47]=b(" Start Shopping ",-1))]),_:1})])):(o(),a("div",pl,[(o(!0),a(f,null,S(re.value,l=>(o(),a("div",{key:l.name,class:_(["rounded-2xl border overflow-hidden hover:shadow-md transition-shadow",l.is_subscription_order?"bg-blue-50/40 border-blue-100":"bg-white border-gray-100"])},[e("div",xl,[e("div",gl,[e("div",{class:_(["p-2 rounded-xl flex-shrink-0",dt(l.status_color)])},[(o(),C(Ee(nt(l.status_color)),{class:_(["w-4 h-4",it(l.status_color)])},null,8,["class"]))],2),e("div",bl,[e("div",yl,[e("span",vl,d(l.name),1),i(n(X),{label:l.display_status,theme:rt(l.status_color),size:"sm"},null,8,["label","theme"]),l.is_subscription_order?(o(),a("span",ml,[i(n(q),{class:"w-2.5 h-2.5"}),t[50]||(t[50]=b(" Subscription Order ",-1))])):c("",!0)]),e("p",fl,[b(d(l.formatted_date),1),l.seller?(o(),a("span",hl," Â· "+d(l.seller),1)):c("",!0)])])]),e("div",_l,[e("span",kl,d(l.formatted_total),1),l.can_cancel&&!l.is_subscription_order?(o(),C(n(m),{key:0,variant:"subtle",theme:"red",size:"sm",onClick:r=>ut(l.name)},{default:p(()=>[...t[51]||(t[51]=[b("Cancel",-1)])]),_:1},8,["onClick"])):c("",!0),i(n(m),{variant:"ghost",size:"sm",onClick:r=>ct(l.name)},{icon:p(()=>[se.value===l.name?(o(),C(n(Dt),{key:0,class:"w-4 h-4"})):(o(),C(n(St),{key:1,class:"w-4 h-4"}))]),_:2},1032,["onClick"])])]),se.value===l.name?(o(),a("div",wl,[l.is_subscription_order?(o(),a("div",Cl,[i(n(q),{class:"w-3.5 h-3.5 text-blue-500 mt-0.5 flex-shrink-0"}),t[52]||(t[52]=e("p",{class:"text-xs text-blue-700"}," Auto-generated daily delivery order from your subscription plan. ",-1))])):c("",!0),e("div",Sl,[(o(!0),a(f,null,S(Ne(l),(r,x)=>(o(),a(f,{key:r.key},[e("div",Ml,[e("div",{class:_(["w-7 h-7 rounded-full flex items-center justify-center",r.done?r.key==="completed"?"bg-green-500":"bg-blue-500":"bg-gray-100"])},[(o(),C(Ee(r.icon),{class:_(["w-3.5 h-3.5",r.done?"text-white":"text-gray-300"])},null,8,["class"]))],2),e("span",{class:_(["text-[10px] font-semibold whitespace-nowrap",r.done?r.key==="completed"?"text-green-600":"text-blue-600":"text-gray-400"])},d(r.label),3)]),x<Ne(l).length-1?(o(),a("div",{key:0,class:_(["flex-1 h-px mb-4",r.lineAfter?"bg-blue-200":"bg-gray-100"])},null,2)):c("",!0)],64))),128))]),e("div",Dl,[i(n(jt),{class:"w-4 h-4 text-gray-400 flex-shrink-0"}),e("p",jl,[t[53]||(t[53]=b(" Expected delivery: ",-1)),e("span",Tl,d(l.delivery_date||"To be confirmed"),1)])])])):c("",!0)],2))),128))]))],64)):c("",!0),y.value==="subscriptions"?(o(),a(f,{key:4},[n(j).loading?(o(),a("div",$l,[(o(),a(f,null,S(3,l=>e("div",{key:l,class:"h-32 bg-gray-100 rounded-2xl animate-pulse"})),64))])):ne.value.length===0?(o(),a("div",Ol,[i(n(q),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[55]||(t[55]=e("h3",{class:"text-base font-bold text-gray-700"},"No Subscription Plans Yet",-1)),t[56]||(t[56]=e("p",{class:"text-sm text-gray-400 mt-1"},"Browse newspapers to subscribe for daily delivery.",-1)),i(n(m),{variant:"outline",class:"mt-4",onClick:t[8]||(t[8]=l=>y.value="shop")},{prefix:p(()=>[i(n(pe),{class:"w-4 h-4"})]),default:p(()=>[t[54]||(t[54]=b(" Browse Products ",-1))]),_:1})])):(o(),a("div",Al,[(o(!0),a(f,null,S(ne.value,l=>(o(),a("div",{key:l.name,class:"bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-md transition-shadow"},[e("div",Il,[e("div",Pl,[e("div",zl,[i(n(q),{class:"w-5 h-5"})]),e("div",null,[e("div",ql,[e("span",Nl,d(l.name),1),e("span",{class:_(["text-[10px] font-bold px-2 py-0.5 rounded-full border",xt[l.status]||"bg-gray-100 text-gray-500 border-gray-200"])},d(l.status),3)]),e("p",Fl,[b(d(l.formatted_start)+" â†’ "+d(l.formatted_end)+" ",1),l.seller?(o(),a("span",Vl,"Â· "+d(l.seller),1)):c("",!0)])])])]),e("div",Bl,[(o(!0),a(f,null,S(l.schedule_items,r=>(o(),a("div",{key:r.item_code,class:"bg-gray-50 rounded-xl p-3 border border-gray-100"},[e("div",Rl,[e("span",Ll,d(r.item_name),1),r.is_primary_item?(o(),a("span",Wl,"Primary")):c("",!0)]),e("div",El,[(o(),a(f,null,S(U,x=>e("div",{key:x,class:_(["flex flex-col items-center px-2 py-1 rounded-lg text-[9px] font-bold",(r[te[x]]||0)>0?"bg-blue-600 text-white":"bg-gray-100 text-gray-400"])},[e("span",null,d(ve[x]),1),(r[te[x]]||0)>0?(o(),a("span",Yl," Ã—"+d(r[te[x]]),1)):c("",!0)],2)),64))])]))),128)),l.status==="Accept Pending"?(o(),a("div",Ul,[i(n(G),{class:"w-3.5 h-3.5 text-amber-500 mt-0.5 flex-shrink-0"}),t[57]||(t[57]=e("p",{class:"text-xs text-amber-700"},"Waiting for seller approval. Once accepted, daily delivery starts from next day.",-1))])):c("",!0)])]))),128))]))],64)):c("",!0),i(n(we),{modelValue:E.value,"onUpdate:modelValue":t[12]||(t[12]=l=>E.value=l),options:{title:"Create Subscription Plan",size:"lg"}},{"body-content":p(()=>{var l;return[e("div",Hl,[e("div",Ql,[i(n(G),{class:"w-5 h-5 text-amber-500 mt-0.5 flex-shrink-0"}),t[58]||(t[58]=e("div",null,[e("p",{class:"font-semibold text-sm text-amber-800"},"How it works"),e("p",{class:"text-xs text-amber-700 mt-1"}," After you send the request, seller will review it. Once accepted, daily delivery starts from the next day automatically via our system. ")],-1))]),e("div",Jl,[i(n(q),{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e("div",Xl,[e("p",Kl,d((l=v.value)==null?void 0:l.item_name),1),t[59]||(t[59]=e("p",{class:"text-xs text-blue-600 mt-0.5"},"Primary item â€” configure day-wise delivery below",-1))])]),v.value?(o(),a("div",Gl,[e("label",Zl," ðŸ“… Day-wise Delivery Schedule â€” "+d(v.value.item_name),1),e("div",eo,[e("table",to,[t[60]||(t[60]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left font-bold text-gray-500 uppercase tracking-wide"},"Day"),e("th",{class:"px-3 py-2 text-center font-bold text-gray-500 uppercase tracking-wide"},"Deliver?"),e("th",{class:"px-3 py-2 text-center font-bold text-gray-500 uppercase tracking-wide"},"Qty"),e("th",{class:"px-3 py-2 text-right font-bold text-gray-500 uppercase tracking-wide"},"Price/copy"),e("th",{class:"px-3 py-2 text-right font-bold text-gray-500 uppercase tracking-wide"},"Day Cost")])],-1)),e("tbody",so,[(o(),a(f,null,S(U,r=>e("tr",{key:r,class:_(T(v.value.item_code,r)?"bg-blue-50/50":"bg-white")},[e("td",lo,d(r),1),e("td",oo,[e("button",{onClick:x=>ze(v.value.item_code,r),class:_(["w-8 h-5 rounded-full transition-colors relative",T(v.value.item_code,r)?"bg-blue-600":"bg-gray-200"])},[e("span",{class:_(["absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform",T(v.value.item_code,r)?"translate-x-3":"translate-x-0.5"])},null,2)],10,ao)]),e("td",ro,[T(v.value.item_code,r)?(o(),a("div",no,[e("button",{onClick:x=>J(v.value.item_code,r,M(v.value.item_code,r)-1),disabled:M(v.value.item_code,r)<=1,class:"w-5 h-5 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 font-bold disabled:opacity-30 text-xs"},"âˆ’",8,io),e("span",co,d(M(v.value.item_code,r)),1),e("button",{onClick:x=>J(v.value.item_code,r,M(v.value.item_code,r)+1),disabled:M(v.value.item_code,r)>=99,class:"w-5 h-5 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 font-bold disabled:opacity-30 text-xs"},"+",8,uo)])):(o(),a("span",po,"â€”"))]),e("td",xo,[B(v.value,r)>0?(o(),a("span",go," â‚¹"+d(B(v.value,r)),1)):(o(),a("span",bo,"No price"))]),e("td",{class:_(["px-3 py-2 text-right font-bold",T(v.value.item_code,r)?"text-gray-800":"text-gray-300"])},[T(v.value.item_code,r)&&B(v.value,r)>0?(o(),a("span",yo," â‚¹"+d((M(v.value.item_code,r)*B(v.value,r)).toFixed(2)),1)):(o(),a("span",vo,"â€”"))],2)],2)),64))])])])])):c("",!0),qe.value.length>0?(o(),a("div",mo,[t[62]||(t[62]=e("label",{class:"text-xs font-bold text-gray-700 mb-2 block uppercase tracking-wide"}," âž• Add More Items (Optional) ",-1)),e("div",fo,[(o(!0),a(f,null,S(qe.value,r=>(o(),a("div",{key:r.item_code},[e("div",{onClick:x=>et(r),class:_(["flex items-center justify-between p-3 rounded-xl border cursor-pointer transition-all",de(r.item_code)?"border-purple-300 bg-purple-50":"border-gray-200 bg-gray-50 hover:border-gray-300"])},[e("div",_o,[e("div",{class:_(["w-4 h-4 rounded border-2 flex items-center justify-center",de(r.item_code)?"border-purple-500 bg-purple-500":"border-gray-300"])},[de(r.item_code)?(o(),C(n(O),{key:0,class:"w-3 h-3 text-white"})):c("",!0)],2),e("span",ko,d(r.item_name),1)]),e("span",wo,"Today: "+d(r.formatted_price),1)],10,ho),de(r.item_code)?(o(),a("div",Co,[e("table",So,[t[61]||(t[61]=e("thead",{class:"bg-purple-50 border-b border-purple-200"},[e("tr",null,[e("th",{class:"px-3 py-1.5 text-left font-bold text-purple-600"},"Day"),e("th",{class:"px-3 py-1.5 text-center font-bold text-purple-600"},"Deliver?"),e("th",{class:"px-3 py-1.5 text-center font-bold text-purple-600"},"Qty"),e("th",{class:"px-3 py-1.5 text-right font-bold text-purple-600"},"Price")])],-1)),e("tbody",Mo,[(o(),a(f,null,S(U,x=>e("tr",{key:x,class:_(T(r.item_code,x)?"bg-purple-50/30":"bg-white")},[e("td",Do,d(ve[x]),1),e("td",jo,[e("button",{onClick:$=>ze(r.item_code,x),class:_(["w-7 h-4 rounded-full transition-colors relative",T(r.item_code,x)?"bg-purple-500":"bg-gray-200"])},[e("span",{class:_(["absolute top-0.5 w-3 h-3 bg-white rounded-full shadow transition-transform",T(r.item_code,x)?"translate-x-3":"translate-x-0.5"])},null,2)],10,To)]),e("td",$o,[T(r.item_code,x)?(o(),a("div",Oo,[e("button",{onClick:$=>J(r.item_code,x,M(r.item_code,x)-1),disabled:M(r.item_code,x)<=1,class:"w-4 h-4 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold disabled:opacity-30 text-xs"},"âˆ’",8,Ao),e("span",Io,d(M(r.item_code,x)),1),e("button",{onClick:$=>J(r.item_code,x,M(r.item_code,x)+1),disabled:M(r.item_code,x)>=99,class:"w-4 h-4 rounded bg-gray-100 hover:bg-gray-200 flex items-center justify-center font-bold disabled:opacity-30 text-xs"},"+",8,Po)])):(o(),a("span",zo,"â€”"))]),e("td",qo,[B(r,x)>0?(o(),a("span",No,"â‚¹"+d(B(r,x)),1)):(o(),a("span",Fo,"No price"))])],2)),64))])])])):c("",!0)]))),128))])])):c("",!0),e("div",Vo,[e("div",null,[t[63]||(t[63]=e("label",{class:"text-xs font-bold text-gray-700 mb-1.5 block"},"Start Date",-1)),We(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=r=>k.value.startDate=r),class:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[kt,k.value.startDate]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"text-xs font-bold text-gray-700 mb-1.5 block"},"Duration",-1)),We(e("select",{"onUpdate:modelValue":t[10]||(t[10]=r=>k.value.months=r),class:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[64]||(t[64]=[e("option",{value:1},"1 Month",-1),e("option",{value:3},"3 Months",-1),e("option",{value:6},"6 Months",-1),e("option",{value:12},"12 Months",-1)])],512),[[wt,k.value.months]])])]),I.value?(o(),a("div",Bo,[e("p",Ro,d(I.value),1)])):c("",!0)])]}),actions:p(()=>[e("div",Lo,[i(n(m),{variant:"outline",class:"flex-1",onClick:t[11]||(t[11]=l=>E.value=!1)},{default:p(()=>[...t[66]||(t[66]=[b("Cancel",-1)])]),_:1}),i(n(m),{variant:"solid",theme:"blue",class:"flex-1",loading:Y.value,onClick:tt},{prefix:p(()=>[Y.value?c("",!0):(o(),C(n(O),{key:0,class:"w-4 h-4"}))]),default:p(()=>[t[67]||(t[67]=b(" Send Subscription Request ",-1))]),_:1},8,["loading"])])]),_:1},8,["modelValue"]),i(n(we),{modelValue:W.value,"onUpdate:modelValue":t[14]||(t[14]=l=>W.value=l),options:{title:"Order Summary",size:"lg"}},{"body-content":p(()=>[e("div",Wo,[g.filters.pincode||g.filters.society?(o(),a("div",Eo,[i(n(Ct),{class:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),e("p",Yo,[t[68]||(t[68]=e("span",{class:"font-semibold"},"Delivery to: ",-1)),g.filters.society?(o(),a("span",Uo,d(g.filters.society),1)):c("",!0),g.filters.society&&g.filters.pincode?(o(),a("span",Ho," Â· ")):c("",!0),g.filters.pincode?(o(),a("span",Qo,"PIN "+d(g.filters.pincode),1)):c("",!0)])])):c("",!0),e("div",Jo,[(o(!0),a(f,null,S(he.value,l=>(o(),a("div",{key:l.name,class:"flex items-center gap-3 bg-gray-50 rounded-xl p-3 border border-gray-100"},[e("div",Xo,[l.image?(o(),a("img",{key:0,src:l.image,class:"w-full h-full object-cover"},null,8,Ko)):(o(),C(n(K),{key:1,class:"w-5 h-5 text-gray-200"}))]),e("div",Go,[e("p",Zo,d(l.item_name),1),e("p",ea,d(l.formatted_price)+" / "+d(l.stock_uom),1),e("div",ta,[i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,-1)},{icon:p(()=>[i(n(Se),{class:"w-3 h-3"})]),_:1},8,["onClick"]),e("span",sa,d(l.qty),1),i(n(m),{variant:"ghost",size:"sm",onClick:r=>z(l.name,1)},{icon:p(()=>[i(n(Me),{class:"w-3 h-3"})]),_:1},8,["onClick"])])]),e("div",la,[e("span",oa,d(ce(l.subtotal)),1),i(n(m),{variant:"ghost",size:"sm",theme:"red",onClick:r=>st(l.name)},{icon:p(()=>[i(n(Ot),{class:"w-3 h-3"})]),_:1},8,["onClick"])])]))),128))]),e("div",aa,[e("div",ra,[e("span",null,"Subtotal ("+d(fe.value)+" items)",1),e("span",null,d(ce(_e.value)),1)]),t[70]||(t[70]=e("div",{class:"flex justify-between text-gray-500"},[e("span",null,"Delivery"),e("span",{class:"text-green-600 font-semibold"},"Free")],-1)),e("div",na,[t[69]||(t[69]=e("span",null,"Total",-1)),e("span",null,d(ce(_e.value)),1)])]),A.value?(o(),a("div",ia,d(A.value),1)):c("",!0)])]),actions:p(()=>[e("div",da,[i(n(m),{variant:"outline",class:"flex-1",onClick:t[13]||(t[13]=l=>W.value=!1)},{default:p(()=>[...t[71]||(t[71]=[b("Cancel",-1)])]),_:1}),i(n(m),{variant:"solid",theme:"blue",class:"flex-1",loading:N.value,disabled:N.value||he.value.length===0,onClick:ot},{prefix:p(()=>[N.value?c("",!0):(o(),C(n(O),{key:0,class:"w-4 h-4"}))]),default:p(()=>[b(" "+d(N.value?"Placing Order...":"Place Order"),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["modelValue"]),i(n(we),{modelValue:H.value,"onUpdate:modelValue":t[16]||(t[16]=l=>H.value=l),options:{title:"Cancel Order",message:`Are you sure you want to cancel ${Q.value}?`,size:"sm"}},{actions:p(()=>[e("div",ca,[i(n(m),{variant:"outline",class:"flex-1",onClick:t[15]||(t[15]=l=>H.value=!1)},{default:p(()=>[...t[72]||(t[72]=[b("Keep Order",-1)])]),_:1}),i(n(m),{variant:"solid",theme:"red",class:"flex-1",loading:n(Oe).loading,onClick:pt},{default:p(()=>[...t[73]||(t[73]=[b("Yes, Cancel",-1)])]),_:1},8,["loading"])])]),_:1},8,["modelValue","options"])]))}});export{ba as default};
