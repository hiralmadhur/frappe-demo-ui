var $e=Object.defineProperty,Te=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Pe=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var oe=(c,u,p)=>u in c?$e(c,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[u]=p,U=(c,u)=>{for(var p in u||(u={}))Pe.call(u,p)&&oe(c,p,u[p]);if(ae)for(var p of ae(u))De.call(u,p)&&oe(c,p,u[p]);return c},re=(c,u)=>Te(c,Ie(u));import{c as j,d as Ne,b as L,w as ne,o,e as r,f as e,g as n,u as a,S as Ae,t as i,h as d,l as f,i as y,_ as v,j as g,v as C,x as X,C as M,y as G,F as h,r as z,M as Ve,m as b,n as _,z as ie,A as Re}from"./index.js";import{a as de,R as ce,S as Fe,_ as Q,P as R,D as ue,F as Be,C as Y,T as ge}from"./truck.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=j("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=j("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=j("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=j("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=j("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=j("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=j("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),qe={class:"p-6 space-y-5 max-w-7xl mx-auto"},He={class:"flex justify-between items-center bg-white p-5 rounded-2xl border border-gray-100 shadow-sm"},We={class:"flex items-center gap-4"},Je={class:"p-3 bg-blue-600 rounded-xl text-white shadow-lg"},Ke={class:"text-xs text-gray-400"},Xe={class:"flex items-center gap-2"},Ge={key:0,class:"hidden sm:flex items-center gap-1.5 bg-blue-50 border border-blue-100 rounded-lg px-3 py-1.5"},Qe={class:"text-xs font-semibold text-blue-700"},Ze={class:"flex gap-1 bg-gray-100 p-1 rounded-xl w-fit"},et={key:0,class:"bg-green-50 border border-green-200 rounded-2xl p-4 space-y-2"},tt={class:"flex items-start justify-between"},st={class:"flex gap-3"},lt={class:"text-xs text-green-700 mt-0.5"},at={class:"font-mono font-semibold"},ot={class:"font-semibold"},rt={key:0,class:"flex items-start gap-2 bg-orange-50 border border-orange-200 rounded-xl px-3 py-2 ml-8"},nt={class:"text-xs text-orange-700"},it={class:"font-semibold"},dt={class:"font-semibold"},ct={key:0,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-28 text-center"},ut={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"},gt={class:"flex items-center gap-2 bg-blue-50 border border-blue-100 rounded-xl px-4 py-2.5 mb-4"},pt={class:"text-xs text-blue-700"},xt={class:"font-semibold"},yt={key:0,class:"text-orange-600 font-semibold ml-1"},vt={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 mb-6"},mt={class:"aspect-square bg-gray-50 relative overflow-hidden"},ft=["src"],bt={key:1,class:"w-full h-full flex items-center justify-center"},ht={key:2,class:"absolute top-2 right-2"},_t={key:3,class:"absolute top-2 left-2"},kt={class:"bg-emerald-500 text-white text-[9px] font-bold px-1.5 py-0.5 rounded-full flex items-center gap-0.5 shadow"},wt={class:"p-3 flex-1 flex flex-col justify-between"},Ct={class:"font-bold text-gray-800 line-clamp-2 text-sm"},jt={class:"text-[10px] text-gray-400 mt-0.5 uppercase tracking-tight"},St={class:"mt-3"},Ot={class:"flex items-baseline gap-1 mb-1"},Mt={class:"text-base font-black text-gray-900"},zt={class:"text-[10px] text-gray-400"},$t={key:0,class:"flex items-center gap-1 mb-2"},Tt={class:"text-[10px] text-gray-400 line-through"},It={key:2,class:"flex items-center justify-between bg-gray-50 rounded-lg p-0.5 border"},Pt={class:"font-bold text-sm text-blue-600"},Dt={key:1,class:"space-y-3"},Nt={class:"flex items-center gap-2"},At={class:"flex items-center gap-1.5 text-xs text-gray-400 font-semibold px-2"},Vt={class:"flex items-start gap-2 bg-orange-50 border border-orange-100 rounded-xl px-4 py-3"},Rt={class:"text-xs text-orange-700"},Ft={class:"font-semibold"},Bt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"},Et={class:"aspect-square bg-gray-100 relative overflow-hidden"},Ut=["src"],Lt={key:1,class:"w-full h-full flex items-center justify-center"},Yt={class:"absolute inset-0 flex items-center justify-center"},qt={class:"bg-white/90 border border-orange-200 rounded-lg px-2 py-1 flex items-center gap-1 shadow-sm"},Ht={class:"p-3 flex-1 flex flex-col justify-between"},Wt={class:"font-bold text-gray-500 line-clamp-2 text-sm"},Jt={class:"text-[10px] text-gray-400 mt-0.5 uppercase tracking-tight"},Kt={class:"mt-3"},Xt={class:"text-[10px] text-orange-500 font-semibold mb-2"},Gt={key:2,class:"text-center py-20"},Qt={key:3,class:"text-center py-20"},Zt={key:0,class:"space-y-3"},es={key:1,class:"bg-gray-50 rounded-3xl border-2 border-dashed border-gray-200 py-28 text-center"},ts={key:2,class:"space-y-3"},ss={class:"flex items-center justify-between p-4 gap-3"},ls={class:"flex items-center gap-3 min-w-0"},as={class:"min-w-0"},os={class:"flex items-center gap-2 flex-wrap"},rs={class:"font-bold text-gray-900 text-sm font-mono"},ns={class:"text-xs text-gray-400 mt-0.5"},is={key:0},ds={class:"flex items-center gap-2 flex-shrink-0"},cs={class:"font-black text-gray-900 text-sm"},us={key:0,class:"border-t border-gray-50 px-4 pb-5 pt-4 space-y-4"},gs={class:"flex items-center gap-1"},ps={class:"flex flex-col items-center gap-1"},xs={class:"flex items-center gap-3 bg-gray-50 rounded-xl p-3"},ys={class:"text-xs text-gray-500"},vs={class:"font-semibold text-gray-700"},ms={key:0,class:"flex items-start gap-2 bg-orange-50 border border-orange-100 rounded-xl px-3 py-2.5"},fs={class:"space-y-4"},bs={key:0,class:"flex items-start gap-2 bg-blue-50 border border-blue-100 rounded-xl px-4 py-3"},hs={class:"text-xs text-blue-700"},_s={key:0},ks={key:1},ws={key:2},Cs={class:"flex items-center gap-2 bg-emerald-50 border border-emerald-100 rounded-xl px-3 py-2"},js={class:"text-xs text-emerald-700"},Ss={class:"font-semibold"},Os={class:"space-y-2 max-h-72 overflow-y-auto pr-1"},Ms={class:"w-11 h-11 rounded-lg overflow-hidden bg-white border border-gray-100 flex-shrink-0 flex items-center justify-center"},zs=["src"],$s={class:"flex-1 min-w-0"},Ts={class:"font-semibold text-gray-800 text-sm line-clamp-1"},Is={class:"text-xs text-gray-400"},Ps={class:"flex items-center gap-1 mt-1.5 bg-white rounded-lg border border-gray-200 w-fit p-0.5"},Ds={class:"font-bold text-sm text-blue-600 w-5 text-center"},Ns={class:"flex flex-col items-end gap-2 flex-shrink-0"},As={class:"font-bold text-sm text-gray-900"},Vs={class:"border-t border-gray-100 pt-3 space-y-1.5 text-sm"},Rs={class:"flex justify-between text-gray-500"},Fs={class:"flex justify-between font-black text-gray-900 pt-2 border-t border-gray-100"},Bs={key:1,class:"bg-red-50 border border-red-200 text-red-700 text-xs rounded-xl px-4 py-3"},Es={class:"flex gap-2 w-full"},Us={class:"flex gap-2 w-full"},Hs=Ne({__name:"CustomerHome",props:{filters:{}},setup(c){const u=c,p=b("shop"),m=b({}),T=b(!1),S=b(!1),k=b(""),q=b(!1),Z=b(""),ee=b(""),I=b([]),F=b(null),P=b(!1),D=b(null),$=_(()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()]),me=_(()=>$.value.slice(0,3)),O=L({url:"my_frappe_app.api.get_seller_items",debounce:300}),w=L({url:"my_frappe_app.api.get_customer_orders"}),te=L({url:"my_frappe_app.api.cancel_order",onSuccess(l){P.value=!1,D.value=null,l.status==="success"&&w.reload()}}),fe=L({url:"my_frappe_app.api.place_order",onSuccess(l){S.value=!1,l.status==="success"?(Z.value=l.order_id,ee.value=l.formatted_total,I.value=l.skipped_items||[],m.value={},T.value=!1,q.value=!0,u.filters.customer&&w.fetch({customer:u.filters.customer})):k.value=l.message||"Something went wrong."},onError(l){S.value=!1,k.value=(l==null?void 0:l.message)||"Failed to place order."}});ne(()=>u.filters,l=>{l!=null&&l.seller&&O.fetch({seller:l.seller,category:l.category||null}),l!=null&&l.customer&&w.fetch({customer:l.customer})},{deep:!0,immediate:!0}),ne(p,l=>{l==="orders"&&u.filters.customer&&w.fetch({customer:u.filters.customer})});const B=_(()=>O.data||[]),H=_(()=>B.value.filter(l=>l.price_available)),N=_(()=>B.value.filter(l=>!l.price_available)),A=(l,t)=>{const s=(m.value[l]||0)+t,x=U({},m.value);s<=0?delete x[l]:x[l]=s,m.value=x},be=l=>{const t=U({},m.value);delete t[l],m.value=t},W=_(()=>Object.values(m.value).reduce((l,t)=>l+t,0)),J=_(()=>O.data?Object.entries(m.value).map(([l,t])=>{const s=B.value.find(x=>x.name===l);return s?re(U({},s),{qty:t,subtotal:s.price*t}):null}).filter(Boolean):[]),K=_(()=>J.value.reduce((l,t)=>l+t.subtotal,0)),V=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(l),se=l=>l.price_available&&l.standard_rate!=null&&Math.abs(l.price-l.standard_rate)>.01,he=()=>{if(!u.filters.seller||!u.filters.customer){k.value="Seller or customer info missing.";return}if(!Object.keys(m.value).length){k.value="Your cart is empty.";return}k.value="",S.value=!0,fe.fetch({cart_data:JSON.stringify(m.value),customer:u.filters.customer,seller:u.filters.seller,pincode:u.filters.pincode||"",society:u.filters.society||null,delivery_address:u.filters.delivery_address||null})},_e=()=>{k.value="",T.value=!0},E=_(()=>{var l;return((l=w.data)==null?void 0:l.orders)||[]}),ke=l=>({orange:Y,blue:M,purple:ge,green:M,red:Ue,gray:Y})[l]||Y,we=l=>({orange:"text-orange-500",blue:"text-blue-500",purple:"text-blue-500",green:"text-green-500",red:"text-red-500",gray:"text-gray-400"})[l]||"text-gray-400",Ce=l=>({orange:"bg-orange-50",blue:"bg-blue-50",purple:"bg-blue-50",green:"bg-green-50",red:"bg-red-50",gray:"bg-gray-50"})[l]||"bg-gray-50",je=l=>({orange:"orange",blue:"blue",purple:"blue",green:"green",red:"red",gray:"gray"})[l]||"gray",Se=l=>{F.value=F.value===l?null:l},Oe=l=>{D.value=l,P.value=!0},Me=()=>{D.value&&te.fetch({order_id:D.value})},le=l=>[{key:"placed",label:"Placed",icon:M,done:!0,lineAfter:l.docstatus>=1},{key:"accepted",label:"Accepted",icon:M,done:l.docstatus>=1,lineAfter:l.per_delivered>=100},{key:"delivered",label:"Delivered",icon:ge,done:l.per_delivered>=100,lineAfter:l.status==="Completed"},{key:"completed",label:"Completed",icon:M,done:l.status==="Completed",lineAfter:!1}];return(l,t)=>(o(),r("div",qe,[e("div",He,[e("div",We,[e("div",Je,[n(a(Ae),{class:"w-5 h-5"})]),e("div",null,[t[10]||(t[10]=e("h2",{class:"text-lg font-bold text-gray-900"},"Customer Portal",-1)),e("p",Ke,i(c.filters.seller?c.filters.seller:"Select a seller to browse products"),1)])]),e("div",Xe,[p.value==="shop"&&c.filters.seller?(o(),r("div",Ge,[n(a(de),{class:"w-3.5 h-3.5 text-blue-500"}),e("span",Qe,i($.value)+" Rates",1)])):d("",!0),p.value==="shop"&&a(O).data?(o(),f(a(v),{key:1,variant:"outline",size:"sm",loading:a(O).loading,onClick:t[0]||(t[0]=s=>a(O).fetch({seller:c.filters.seller,category:c.filters.category||null}))},{prefix:y(()=>[n(a(ce),{class:"w-3.5 h-3.5"})]),_:1},8,["loading"])):d("",!0),p.value==="orders"?(o(),f(a(v),{key:2,variant:"outline",size:"sm",loading:a(w).loading,onClick:t[1]||(t[1]=s=>a(w).reload())},{prefix:y(()=>[n(a(ce),{class:"w-3.5 h-3.5"})]),_:1},8,["loading"])):d("",!0),W.value>0&&p.value==="shop"?(o(),f(a(v),{key:3,variant:"solid",theme:"blue",onClick:_e},{prefix:y(()=>[n(a(Fe),{class:"w-4 h-4"})]),default:y(()=>[g(" "+i(W.value)+" items · "+i(V(K.value)),1)]),_:1})):d("",!0)])]),e("div",Ze,[e("button",{onClick:t[2]||(t[2]=s=>p.value="shop"),class:C(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all",p.value==="shop"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},[n(a(X),{class:"w-4 h-4"}),t[11]||(t[11]=g(" Shop ",-1))],2),e("button",{onClick:t[3]||(t[3]=s=>p.value="orders"),class:C(["flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all",p.value==="orders"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"])},[n(a(pe),{class:"w-4 h-4"}),t[12]||(t[12]=g(" My Orders ",-1)),E.value.length>0?(o(),f(a(Q),{key:0,label:String(E.value.length),theme:"blue",size:"sm"},null,8,["label"])):d("",!0)],2)]),q.value?(o(),r("div",et,[e("div",tt,[e("div",st,[n(a(M),{class:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e("div",null,[t[14]||(t[14]=e("p",{class:"font-bold text-green-800 text-sm"},"Order placed successfully!",-1)),e("p",lt,[e("span",at,i(Z.value),1),t[13]||(t[13]=g(" · Total: ",-1)),e("span",ot,i(ee.value),1)])])]),n(a(v),{variant:"ghost",size:"sm",onClick:t[4]||(t[4]=s=>{q.value=!1,I.value=[]})},{default:y(()=>[...t[15]||(t[15]=[g("✕",-1)])]),_:1})]),I.value.length>0?(o(),r("div",rt,[n(a(G),{class:"w-3.5 h-3.5 text-orange-500 mt-0.5 flex-shrink-0"}),e("p",nt,[e("span",it,i(I.value.length)+" item(s) skipped",1),t[16]||(t[16]=g(" — seller has not set price for today: ",-1)),e("span",dt,i(I.value.join(", ")),1)])])):d("",!0)])):d("",!0),p.value==="shop"?(o(),r(h,{key:1},[c.filters.seller?a(O).loading?(o(),r("div",ut,[(o(),r(h,null,z(8,s=>e("div",{key:s,class:"h-60 bg-gray-100 rounded-2xl animate-pulse"})),64))])):B.value.length>0?(o(),r(h,{key:2},[e("div",gt,[n(a(ve),{class:"w-4 h-4 text-blue-500 flex-shrink-0"}),e("p",pt,[t[19]||(t[19]=g(" Prices shown are ",-1)),e("span",xt,i($.value)+"'s rates",1),t[20]||(t[20]=g(" from Daily Item Price schedule. ",-1)),N.value.length>0?(o(),r("span",yt," · "+i(N.value.length)+" item(s) unavailable today. ",1)):d("",!0)])]),H.value.length>0?(o(),r("div",vt,[(o(!0),r(h,null,z(H.value,s=>(o(),r("div",{key:s.name,class:"bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-lg transition-all flex flex-col group"},[e("div",mt,[s.image?(o(),r("img",{key:0,src:s.image,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,ft)):(o(),r("div",bt,[n(a(R),{class:"w-10 h-10 text-gray-200"})])),m.value[s.name]?(o(),r("div",ht,[n(a(Q),{label:`${m.value[s.name]} Added`,theme:"blue"},null,8,["label"])])):d("",!0),se(s)?(o(),r("div",_t,[e("div",kt,[n(a(ve),{class:"w-2.5 h-2.5"}),g(" "+i(me.value),1)])])):d("",!0)]),e("div",wt,[e("div",null,[e("h4",Ct,i(s.item_name),1),e("p",jt,i(s.item_group),1)]),e("div",St,[e("div",Ot,[e("span",Mt,i(s.formatted_price),1),e("span",zt,"/ "+i(s.stock_uom),1)]),se(s)?(o(),r("div",$t,[e("span",Tt,i(V(s.standard_rate)),1),t[21]||(t[21]=e("span",{class:"text-[9px] text-emerald-600 font-semibold"},"Daily Rate",-1))])):d("",!0),m.value[s.name]?(o(),r("div",It,[n(a(v),{variant:"ghost",size:"sm",onClick:x=>A(s.name,-1)},{icon:y(()=>[n(a(xe),{class:"w-3 h-3"})]),_:1},8,["onClick"]),e("span",Pt,i(m.value[s.name]),1),n(a(v),{variant:"ghost",size:"sm",onClick:x=>A(s.name,1)},{icon:y(()=>[n(a(ye),{class:"w-3 h-3"})]),_:1},8,["onClick"])])):(o(),f(a(v),{key:1,variant:"outline",class:"w-full",size:"sm",onClick:x=>A(s.name,1)},{default:y(()=>[...t[22]||(t[22]=[g(" Add to Cart ",-1)])]),_:1},8,["onClick"]))])])]))),128))])):d("",!0),N.value.length>0?(o(),r("div",Dt,[e("div",Nt,[t[24]||(t[24]=e("div",{class:"flex-1 h-px bg-gray-100"},null,-1)),e("div",At,[n(a(G),{class:"w-3.5 h-3.5 text-orange-400"}),t[23]||(t[23]=g(" Not Available Today ",-1))]),t[25]||(t[25]=e("div",{class:"flex-1 h-px bg-gray-100"},null,-1))]),e("div",Vt,[n(a(Le),{class:"w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0"}),e("p",Rt,[t[26]||(t[26]=g(" The following items are ",-1)),e("span",Ft,"not available for "+i($.value),1),t[27]||(t[27]=g(". Seller has not set a price for today — please check back tomorrow or contact the seller. ",-1))])]),e("div",Bt,[(o(!0),r(h,null,z(N.value,s=>(o(),r("div",{key:s.name,class:"bg-gray-50 rounded-2xl border border-gray-100 overflow-hidden flex flex-col opacity-60"},[e("div",Et,[s.image?(o(),r("img",{key:0,src:s.image,class:"w-full h-full object-cover grayscale"},null,8,Ut)):(o(),r("div",Lt,[n(a(R),{class:"w-10 h-10 text-gray-300"})])),e("div",Yt,[e("div",qt,[n(a(G),{class:"w-3 h-3 text-orange-500"}),t[28]||(t[28]=e("span",{class:"text-[10px] font-bold text-orange-600"},"Not Available",-1))])])]),e("div",Ht,[e("div",null,[e("h4",Wt,i(s.item_name),1),e("p",Jt,i(s.item_group),1)]),e("div",Kt,[e("p",Xt,i(s.price_reason||`No price set for ${$.value}`),1),t[29]||(t[29]=e("button",{disabled:"",class:"w-full py-1.5 px-3 rounded-lg border border-gray-200 text-xs font-semibold text-gray-400 bg-gray-100 cursor-not-allowed"}," Unavailable Today ",-1))])])]))),128))])])):d("",!0),H.value.length===0&&N.value.length===0?(o(),r("div",Gt,[n(a(R),{class:"w-10 h-10 text-gray-300 mx-auto mb-2"}),t[30]||(t[30]=e("p",{class:"text-gray-500 text-sm font-medium"},"No products found.",-1))])):d("",!0)],64)):(o(),r("div",Qt,[n(a(R),{class:"w-10 h-10 text-gray-300 mx-auto mb-2"}),t[31]||(t[31]=e("p",{class:"text-gray-500 text-sm font-medium"},"No products found.",-1))])):(o(),r("div",ct,[n(a(X),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[17]||(t[17]=e("h3",{class:"text-base font-bold text-gray-700"},"Ready to Shop?",-1)),t[18]||(t[18]=e("p",{class:"text-sm text-gray-400 mt-1"},"Select a Seller from the sidebar.",-1))]))],64)):d("",!0),p.value==="orders"?(o(),r(h,{key:2},[a(w).loading?(o(),r("div",Zt,[(o(),r(h,null,z(3,s=>e("div",{key:s,class:"h-20 bg-gray-100 rounded-2xl animate-pulse"})),64))])):E.value.length===0?(o(),r("div",es,[n(a(pe),{class:"w-10 h-10 text-gray-300 mx-auto mb-3"}),t[33]||(t[33]=e("h3",{class:"text-base font-bold text-gray-700"},"No Orders Yet",-1)),t[34]||(t[34]=e("p",{class:"text-sm text-gray-400 mt-1"},"Your placed orders will appear here.",-1)),n(a(v),{variant:"outline",class:"mt-4",onClick:t[5]||(t[5]=s=>p.value="shop")},{prefix:y(()=>[n(a(X),{class:"w-4 h-4"})]),default:y(()=>[t[32]||(t[32]=g(" Start Shopping ",-1))]),_:1})])):(o(),r("div",ts,[(o(!0),r(h,null,z(E.value,s=>(o(),r("div",{key:s.name,class:"bg-white rounded-2xl border border-gray-100 overflow-hidden hover:shadow-md transition-shadow"},[e("div",ss,[e("div",ls,[e("div",{class:C(["p-2 rounded-xl flex-shrink-0",Ce(s.status_color)])},[(o(),f(ie(ke(s.status_color)),{class:C(["w-4 h-4",we(s.status_color)])},null,8,["class"]))],2),e("div",as,[e("div",os,[e("span",rs,i(s.name),1),n(a(Q),{label:s.display_status,theme:je(s.status_color),size:"sm"},null,8,["label","theme"])]),e("p",ns,[g(i(s.formatted_date)+" ",1),s.seller?(o(),r("span",is," · "+i(s.seller),1)):d("",!0)])])]),e("div",ds,[e("span",cs,i(s.formatted_total),1),s.can_cancel?(o(),f(a(v),{key:0,variant:"subtle",theme:"red",size:"sm",onClick:x=>Oe(s.name)},{default:y(()=>[...t[35]||(t[35]=[g("Cancel",-1)])]),_:1},8,["onClick"])):d("",!0),n(a(v),{variant:"ghost",size:"sm",onClick:x=>Se(s.name)},{icon:y(()=>[F.value===s.name?(o(),f(a(Ee),{key:0,class:"w-4 h-4"})):(o(),f(a(Re),{key:1,class:"w-4 h-4"}))]),_:2},1032,["onClick"])])]),F.value===s.name?(o(),r("div",us,[e("div",gs,[(o(!0),r(h,null,z(le(s),(x,ze)=>(o(),r(h,{key:x.key},[e("div",ps,[e("div",{class:C(["w-7 h-7 rounded-full flex items-center justify-center transition-colors",x.done?x.key==="completed"?"bg-green-500":"bg-blue-500":"bg-gray-100"])},[(o(),f(ie(x.icon),{class:C(["w-3.5 h-3.5",x.done?"text-white":"text-gray-300"])},null,8,["class"]))],2),e("span",{class:C(["text-[10px] font-semibold whitespace-nowrap",x.done?x.key==="completed"?"text-green-600":"text-blue-600":"text-gray-400"])},i(x.label),3)]),ze<le(s).length-1?(o(),r("div",{key:0,class:C(["flex-1 h-px mb-4",x.lineAfter?"bg-blue-200":"bg-gray-100"])},null,2)):d("",!0)],64))),128))]),e("div",xs,[n(a(Be),{class:"w-4 h-4 text-gray-400 flex-shrink-0"}),e("div",ys,[t[36]||(t[36]=g(" Expected delivery: ",-1)),e("span",vs,i(s.delivery_date||"To be confirmed"),1)])]),s.docstatus===0?(o(),r("div",ms,[n(a(Y),{class:"w-3.5 h-3.5 text-orange-400 mt-0.5 flex-shrink-0"}),t[37]||(t[37]=e("p",{class:"text-xs text-orange-700"},[e("span",{class:"font-semibold"},"Waiting for seller to accept"),g(" — your order is pending review. ")],-1))])):d("",!0)])):d("",!0)]))),128))]))],64)):d("",!0),n(a(ue),{modelValue:T.value,"onUpdate:modelValue":t[7]||(t[7]=s=>T.value=s),options:{title:"Order Summary",size:"lg"}},{"body-content":y(()=>[e("div",fs,[c.filters.pincode||c.filters.society?(o(),r("div",bs,[n(a(Ve),{class:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),e("p",hs,[t[38]||(t[38]=e("span",{class:"font-semibold"},"Delivery to: ",-1)),c.filters.society?(o(),r("span",_s,i(c.filters.society),1)):d("",!0),c.filters.society&&c.filters.pincode?(o(),r("span",ks," · ")):d("",!0),c.filters.pincode?(o(),r("span",ws,"PIN "+i(c.filters.pincode),1)):d("",!0)])])):d("",!0),e("div",Cs,[n(a(de),{class:"w-3.5 h-3.5 text-emerald-600 flex-shrink-0"}),e("p",js,[t[39]||(t[39]=g(" Prices reflect ",-1)),e("span",Ss,i($.value)+"'s Daily Item Price",1),t[40]||(t[40]=g(" rates. ",-1))])]),e("div",Os,[(o(!0),r(h,null,z(J.value,s=>(o(),r("div",{key:s.name,class:"flex items-center gap-3 bg-gray-50 rounded-xl p-3 border border-gray-100"},[e("div",Ms,[s.image?(o(),r("img",{key:0,src:s.image,class:"w-full h-full object-cover"},null,8,zs)):(o(),f(a(R),{key:1,class:"w-5 h-5 text-gray-200"}))]),e("div",$s,[e("p",Ts,i(s.item_name),1),e("p",Is,i(s.formatted_price)+" / "+i(s.stock_uom),1),e("div",Ps,[n(a(v),{variant:"ghost",size:"sm",onClick:x=>A(s.name,-1)},{icon:y(()=>[n(a(xe),{class:"w-3 h-3"})]),_:1},8,["onClick"]),e("span",Ds,i(s.qty),1),n(a(v),{variant:"ghost",size:"sm",onClick:x=>A(s.name,1)},{icon:y(()=>[n(a(ye),{class:"w-3 h-3"})]),_:1},8,["onClick"])])]),e("div",Ns,[e("span",As,i(V(s.subtotal)),1),n(a(v),{variant:"ghost",size:"sm",theme:"red",onClick:x=>be(s.name)},{icon:y(()=>[n(a(Ye),{class:"w-3 h-3"})]),_:1},8,["onClick"])])]))),128))]),e("div",Vs,[e("div",Rs,[e("span",null,"Subtotal ("+i(W.value)+" items)",1),e("span",null,i(V(K.value)),1)]),t[42]||(t[42]=e("div",{class:"flex justify-between text-gray-500"},[e("span",null,"Delivery"),e("span",{class:"text-green-600 font-semibold"},"Free")],-1)),e("div",Fs,[t[41]||(t[41]=e("span",null,"Total",-1)),e("span",null,i(V(K.value)),1)])]),k.value?(o(),r("div",Bs,i(k.value),1)):d("",!0)])]),actions:y(()=>[e("div",Es,[n(a(v),{variant:"outline",class:"flex-1",onClick:t[6]||(t[6]=s=>T.value=!1)},{default:y(()=>[...t[43]||(t[43]=[g("Cancel",-1)])]),_:1}),n(a(v),{variant:"solid",theme:"blue",class:"flex-1",loading:S.value,disabled:S.value||J.value.length===0,onClick:he},{prefix:y(()=>[S.value?d("",!0):(o(),f(a(M),{key:0,class:"w-4 h-4"}))]),default:y(()=>[g(" "+i(S.value?"Placing Order...":"Place Order"),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["modelValue"]),n(a(ue),{modelValue:P.value,"onUpdate:modelValue":t[9]||(t[9]=s=>P.value=s),options:{title:"Cancel Order",message:`Are you sure you want to cancel order ${D.value}? This action cannot be undone.`,size:"sm"}},{actions:y(()=>[e("div",Us,[n(a(v),{variant:"outline",class:"flex-1",onClick:t[8]||(t[8]=s=>P.value=!1)},{default:y(()=>[...t[44]||(t[44]=[g("Keep Order",-1)])]),_:1}),n(a(v),{variant:"solid",theme:"red",class:"flex-1",loading:a(te).loading,onClick:Me},{default:y(()=>[...t[45]||(t[45]=[g("Yes, Cancel",-1)])]),_:1},8,["loading"])])]),_:1},8,["modelValue","options"])]))}});export{Hs as default};
