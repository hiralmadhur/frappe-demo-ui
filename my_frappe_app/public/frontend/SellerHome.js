var S=(_,C,m)=>new Promise((p,r)=>{var j=u=>{try{i(m.next(u))}catch(w){r(w)}},f=u=>{try{i(m.throw(u))}catch(w){r(w)}},i=u=>u.done?p(u.value):Promise.resolve(u.value).then(j,f);i((m=m.apply(_,C)).next())});import{c as z,d as L,a as P,b as $,w as G,o as n,e as g,f as e,t as d,g as l,u as s,C as M,h as x,i as c,j as y,_ as h,k as O,F as I,r as N,l as b,m as B,n as q,p as E,q as H,s as U}from"./index.js";import{C as Q,T as R,R as J,a as A,P as K,_ as F,D as W,S as X,F as Y}from"./truck.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=z("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ee={class:"space-y-6 max-w-7xl mx-auto pb-10 font-sans text-gray-900"},te={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},se={class:"bg-white p-5 rounded-3xl border border-orange-100 shadow-sm flex items-center justify-between group hover:border-orange-300 transition-all"},ae={class:"text-3xl font-black text-gray-900"},re={class:"h-12 w-12 rounded-2xl bg-orange-50 flex items-center justify-center text-orange-500 group-hover:bg-orange-500 group-hover:text-white transition-colors"},oe={class:"bg-white p-5 rounded-3xl border border-blue-100 shadow-sm flex items-center justify-between group hover:border-blue-300 transition-all"},le={class:"text-3xl font-black text-gray-900"},ne={class:"h-12 w-12 rounded-2xl bg-blue-50 flex items-center justify-center text-blue-500 group-hover:bg-blue-600 group-hover:text-white transition-colors"},de={class:"bg-white p-5 rounded-3xl border border-green-100 shadow-sm flex items-center justify-between group hover:border-green-300 transition-all"},ie={class:"text-3xl font-black text-gray-900"},ce={class:"h-12 w-12 rounded-2xl bg-green-50 flex items-center justify-center text-green-600 group-hover:bg-green-600 group-hover:text-white transition-colors"},ue={class:"flex justify-between items-center bg-white p-6 rounded-3xl border border-gray-100 shadow-sm"},ge={class:"flex items-center gap-4"},pe={class:"p-3 bg-gray-900 rounded-2xl text-white shadow-lg ring-4 ring-gray-50"},xe={class:"bg-white rounded-[2rem] border border-gray-100 shadow-xl shadow-gray-100/50 overflow-hidden min-h-[500px]"},me={key:0,class:"flex flex-col items-center justify-center py-40"},ye={class:"bg-blue-50 p-6 rounded-full mb-4"},he={key:1,class:"flex flex-col items-center justify-center py-40"},be={key:2,class:"overflow-x-auto"},fe={class:"w-full text-left border-collapse"},ve={class:"divide-y divide-gray-50"},_e=["onClick"],we={class:"px-8 py-5"},ke={class:"flex items-center gap-3"},Ce={class:"p-2 bg-gray-100 rounded-lg text-gray-500 group-hover:bg-blue-100 group-hover:text-blue-600 transition-colors"},je={class:"font-bold group-hover:text-blue-600 transition-colors"},De={class:"text-xs text-gray-400 font-medium flex items-center gap-1"},Te={class:"px-6 py-5"},Se={class:"px-6 py-5 font-bold text-gray-700 font-mono"},$e={class:"flex items-center justify-end gap-2"},Oe={class:"flex items-center justify-between w-full pr-8"},Ie={class:"flex items-center gap-3"},Ne={class:"h-10 w-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-600"},Be={class:"text-sm text-gray-500 font-mono mt-1"},Re={key:0,class:"flex flex-col items-center justify-center h-80"},Ae={key:1,class:"py-6 space-y-8"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-5"},Ve={class:"bg-gray-50 p-5 rounded-2xl border border-gray-100 flex items-start gap-3"},ze={class:"bg-white p-2 rounded-lg text-gray-500 shadow-sm"},Le={class:"font-bold leading-tight"},Pe={class:"bg-gray-50 p-5 rounded-2xl border border-gray-100 flex items-start gap-3"},Ge={class:"bg-white p-2 rounded-lg text-gray-500 shadow-sm"},Me={class:"font-bold"},qe={class:"bg-blue-600 p-5 rounded-2xl text-white flex items-center justify-between"},Ee={class:"font-black text-2xl"},He={class:"border border-gray-200 rounded-xl overflow-hidden"},Ue={class:"w-full text-sm"},Qe={class:"divide-y divide-gray-100"},Je={class:"px-5 py-4 font-bold text-gray-900"},Ke={class:"px-5 py-4 text-right"},We={class:"px-5 py-4 text-right"},Xe={class:"px-5 py-4 text-right font-bold"},Ye={class:"flex justify-end gap-3 pt-6 border-t border-gray-100"},st=L({__name:"SellerHome",props:{filters:{}},setup(_){const C=_,m=E("showToast"),p=P({doctype:"Sales Order",fields:["name","customer_name","status","grand_total","currency","docstatus","per_delivered","per_billed","transaction_date"],orderBy:"creation desc",pageLength:100,auto:!0}),r=$({url:"frappe.client.get",makeParams(o){return{doctype:"Sales Order",name:o.name}}}),j=$({url:"my_frappe_app.api.process_order_workflow",auto:!1}),f=B(!1),i=B(""),u=q(()=>{const o=p.data||[];return{pending:o.filter(t=>t.docstatus===0).length,toDeliver:o.filter(t=>t.docstatus===1&&t.per_delivered<100).length,completed:o.filter(t=>t.per_delivered>=100).length}});G(()=>C.filters.customer,o=>{o&&(p.update({filters:{customer:o}}),p.reload())},{immediate:!0});const w=o=>{f.value=!0,r.fetch({name:o.name})},v=(o,t)=>S(this,null,function*(){i.value=o;try{const a=yield j.submit({order_id:o,action:t});(a==null?void 0:a.status)==="success"?(m(a.message,"success"),yield p.reload(),f.value&&(yield r.fetch({name:o}))):m((a==null?void 0:a.message)||"Operation Failed","error")}catch(a){m((a==null?void 0:a.message)||"System Error","error")}finally{i.value=""}}),T=o=>["Completed","To Bill","To Deliver"].includes(o)?"green":o==="Draft"?"red":o==="Cancelled"?"gray":"orange",k=(o,t)=>new Intl.NumberFormat("en-IN",{style:"currency",currency:t||"INR"}).format(o);return(o,t)=>(n(),g("div",ee,[_.filters.customer?(n(),g("div",te,[e("div",se,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-1"},"To Accept",-1)),e("p",ae,d(u.value.pending),1)]),e("div",re,[l(s(Q),{class:"w-6 h-6"})])]),e("div",oe,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-1"},"To Deliver",-1)),e("p",le,d(u.value.toDeliver),1)]),e("div",ne,[l(s(R),{class:"w-6 h-6"})])]),e("div",de,[e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs font-bold text-green-500 uppercase tracking-widest mb-1"},"Completed",-1)),e("p",ie,d(u.value.completed),1)]),e("div",ce,[l(s(M),{class:"w-6 h-6"})])])])):x("",!0),e("div",ue,[e("div",ge,[e("div",pe,[l(s(Z),{class:"w-6 h-6"})]),t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-black tracking-tight"},"Seller Operations"),e("p",{class:"text-sm text-gray-500 font-medium"},"Overview & Management")],-1))]),l(s(h),{variant:"outline",onClick:t[0]||(t[0]=a=>s(p).reload()),loading:s(p).loading},{prefix:c(()=>[l(s(J),{class:"w-4 h-4"})]),default:c(()=>[t[10]||(t[10]=y(" Refresh ",-1))]),_:1},8,["loading"])]),e("div",xe,[_.filters.customer?s(p).loading?(n(),g("div",he,[l(s(O),{class:"w-8 h-8 mb-4 text-blue-600"}),t[13]||(t[13]=e("p",{class:"text-gray-400 font-medium animate-pulse"},"Fetching Orders...",-1))])):(n(),g("div",be,[e("table",fe,[t[17]||(t[17]=e("thead",{class:"bg-gray-50/80 border-b border-gray-100"},[e("tr",null,[e("th",{class:"px-8 py-5 text-xs font-bold text-gray-400 uppercase tracking-wider"},"Order Info"),e("th",{class:"px-6 py-5 text-xs font-bold text-gray-400 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-5 text-xs font-bold text-gray-400 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-5 text-xs font-bold text-gray-400 uppercase tracking-wider text-right"},"Actions")])],-1)),e("tbody",ve,[(n(!0),g(I,null,N(s(p).data,a=>(n(),g("tr",{key:a.name,onClick:D=>w(a),class:"hover:bg-blue-50/40 cursor-pointer group transition-all duration-200"},[e("td",we,[e("div",ke,[e("div",Ce,[l(s(X),{class:"w-5 h-5"})]),e("div",null,[e("p",je,d(a.name),1),e("p",De,[l(s(A),{class:"w-3 h-3"}),y(" "+d(a.transaction_date),1)])])])]),e("td",Te,[l(s(F),{theme:T(a.status),variant:"subtle",label:a.status,size:"md"},null,8,["theme","label"])]),e("td",Se,d(k(a.grand_total,a.currency)),1),e("td",{class:"px-6 py-5 text-right",onClick:t[1]||(t[1]=H(()=>{},["stop"]))},[e("div",$e,[a.docstatus===0?(n(),b(s(h),{key:0,variant:"solid",theme:"blue",loading:i.value===a.name,onClick:D=>v(a.name,"accept")},{default:c(()=>[...t[14]||(t[14]=[y("Accept",-1)])]),_:1},8,["loading","onClick"])):x("",!0),a.docstatus===1&&a.per_delivered<100?(n(),b(s(h),{key:1,variant:"subtle",theme:"gray",loading:i.value===a.name,onClick:D=>v(a.name,"deliver")},{prefix:c(()=>[l(s(R),{class:"w-4 h-4"})]),default:c(()=>[t[15]||(t[15]=y(" Deliver ",-1))]),_:1},8,["loading","onClick"])):x("",!0),a.per_delivered>=100&&a.per_billed<100?(n(),b(s(h),{key:2,variant:"subtle",theme:"gray",loading:i.value===a.name,onClick:D=>v(a.name,"invoice")},{prefix:c(()=>[l(s(Y),{class:"w-4 h-4"})]),default:c(()=>[t[16]||(t[16]=y(" Invoice ",-1))]),_:1},8,["loading","onClick"])):x("",!0),l(s(U),{class:"w-5 h-5 text-gray-300 ml-2"})])])],8,_e))),128))])])])):(n(),g("div",me,[e("div",ye,[l(s(V),{class:"w-12 h-12 text-blue-500"})]),t[11]||(t[11]=e("h3",{class:"text-lg font-bold"},"No Customer Selected",-1)),t[12]||(t[12]=e("p",{class:"text-gray-400"},"Please select a customer from the sidebar.",-1))]))]),l(s(W),{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=a=>f.value=a),options:{size:"4xl"}},{"body-title":c(()=>{var a;return[e("div",Oe,[e("div",Ie,[e("div",Ne,[l(s(K),{class:"w-5 h-5"})]),e("div",null,[t[18]||(t[18]=e("h3",{class:"text-xl font-black leading-none"},"Order Details",-1)),e("p",Be,d((a=s(r).data)==null?void 0:a.name),1)])]),s(r).data?(n(),b(s(F),{key:0,theme:T(s(r).data.status),size:"lg",label:s(r).data.status},null,8,["theme","label"])):x("",!0)])]}),"body-content":c(()=>[s(r).loading?(n(),g("div",Re,[l(s(O),{class:"w-10 h-10 text-blue-500"})])):s(r).data?(n(),g("div",Ae,[e("div",Fe,[e("div",Ve,[e("div",ze,[l(s(V),{class:"w-4 h-4"})]),e("div",null,[t[19]||(t[19]=e("p",{class:"text-[11px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"Customer",-1)),e("p",Le,d(s(r).data.customer_name),1)])]),e("div",Pe,[e("div",Ge,[l(s(A),{class:"w-4 h-4"})]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-[11px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"Date",-1)),e("p",Me,d(s(r).data.transaction_date),1)])]),e("div",qe,[e("div",null,[t[21]||(t[21]=e("p",{class:"text-[11px] font-bold text-blue-200 uppercase tracking-widest mb-1"},"Grand Total",-1)),e("p",Ee,d(k(s(r).data.grand_total,s(r).data.currency)),1)])])]),e("div",He,[e("table",Ue,[t[22]||(t[22]=e("thead",{class:"bg-gray-50 text-[10px] uppercase font-bold text-gray-500"},[e("tr",null,[e("th",{class:"px-5 py-4 text-left"},"Item"),e("th",{class:"px-5 py-4 text-right"},"Qty"),e("th",{class:"px-5 py-4 text-right"},"Rate"),e("th",{class:"px-5 py-4 text-right"},"Amount")])],-1)),e("tbody",Qe,[(n(!0),g(I,null,N(s(r).data.items,a=>(n(),g("tr",{key:a.name},[e("td",Je,d(a.item_name),1),e("td",Ke,d(a.qty),1),e("td",We,d(k(a.rate,s(r).data.currency)),1),e("td",Xe,d(k(a.amount,s(r).data.currency)),1)]))),128))])])]),e("div",Ye,[s(r).data.docstatus===0?(n(),b(s(h),{key:0,variant:"solid",theme:"blue",size:"xl",loading:i.value===s(r).data.name,onClick:t[2]||(t[2]=a=>v(s(r).data.name,"accept"))},{default:c(()=>[...t[23]||(t[23]=[y("Accept Order",-1)])]),_:1},8,["loading"])):x("",!0),s(r).data.docstatus===1&&s(r).data.per_delivered<100?(n(),b(s(h),{key:1,variant:"solid",theme:"gray",size:"xl",class:"bg-gray-900 text-white",loading:i.value===s(r).data.name,onClick:t[3]||(t[3]=a=>v(s(r).data.name,"deliver"))},{default:c(()=>[...t[24]||(t[24]=[y("Generate Delivery Note",-1)])]),_:1},8,["loading"])):x("",!0),s(r).data.per_delivered>=100&&s(r).data.per_billed<100?(n(),b(s(h),{key:2,variant:"solid",theme:"gray",size:"xl",class:"bg-gray-900 text-white",loading:i.value===s(r).data.name,onClick:t[4]||(t[4]=a=>v(s(r).data.name,"invoice"))},{default:c(()=>[...t[25]||(t[25]=[y("Generate Invoice",-1)])]),_:1},8,["loading"])):x("",!0)])])):x("",!0)]),_:1},8,["modelValue"])]))}});export{st as default};
